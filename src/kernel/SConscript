from pathlib import Path, PurePath

root = PurePath(Path('.').absolute())

Import('gcc_env')
env = gcc_env

sources = Glob("*.c")

build = str(env['BUILD'] / root.relative_to(env['SRC']))

o_list = []
for source in sources:
    name = source.name
    o_list.append(name)
    name = name.split('.')[0]
    env.Object(f'{build}/{name}', source)

env.Library(o_list)
